<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Google + Kakao Map Sync</title>
<style>
  html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
  #container { display: flex; width: 100%; height: 100%; }
  #googleMap, #kakaoMap { flex: 1; height: 100%; }

  /* ⭐ 지도/스카이뷰 버튼 */
  .mapTypeControl {
      position: absolute;
      top: 10px;
      left: calc(50% + 20px);
      z-index: 1000;
      display: flex;
      gap: 6px;
  }
  .mapTypeBtn {
      background: #fff;
      border: 1px solid #aaa;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      user-select: none;
  }
  .mapTypeBtn.active {
      background: #3578e5;
      color: #fff;
  }
</style>
</head>
<body>

<!-- ⭐ 지도/스카이뷰 버튼 UI -->
<div class="mapTypeControl">
  <div id="btnMap" class="mapTypeBtn active">지도</div>
  <div id="btnSky" class="mapTypeBtn">스카이뷰</div>
</div>

<div id="container">
  <div id="googleMap"></div>
  <div id="kakaoMap"></div>
</div>

<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=8d2d116d6a534a98e73133808f5843a6&libraries=drawing"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBYXu5yKdW71VuKmI-N2M2xbvMaYTK2HCg"></script>

<script>
let googleMap, kakaoMap;

function initMaps() {

    // Google map
    googleMap = new google.maps.Map(document.getElementById("googleMap"), {
        center: { lat: 37.5665, lng: 126.9780 },
        zoom: 14
    });

    // Kakao map
    kakaoMap = new kakao.maps.Map(document.getElementById('kakaoMap'), {
        center: new kakao.maps.LatLng(37.5665, 126.9780),
        level: 5,
        mapTypeId: kakao.maps.MapTypeId.ROADMAP
    });

    // ⭐ 지도 / 스카이뷰 버튼 이벤트
    document.getElementById("btnMap").onclick = function () {
        kakaoMap.setMapTypeId(kakao.maps.MapTypeId.ROADMAP);
        this.classList.add("active");
        document.getElementById("btnSky").classList.remove("active");
    };

    document.getElementById("btnSky").onclick = function () {
        kakaoMap.setMapTypeId(kakao.maps.MapTypeId.HYBRID);
        this.classList.add("active");
        document.getElementById("btnMap").classList.remove("active");
    };

    // Google → Kakao 동기화
    googleMap.addListener("idle", function () {
        const center = googleMap.getCenter();
        const zoom = googleMap.getZoom();
        kakaoMap.setCenter(new kakao.maps.LatLng(center.lat(), center.lng()));
        kakaoMap.setLevel(17 - zoom);
    });

    // Kakao → Google 동기화
    kakao.maps.event.addListener(kakaoMap, 'idle', function () {
        const center = kakaoMap.getCenter();
        const level = kakaoMap.getLevel();
        googleMap.setCenter({ lat: center.getLat(), lng: center.getLng() });
        googleMap.setZoom(17 - level);
    });

}

function checkReady() {
    if (typeof kakao === 'object' && typeof kakao.maps === 'object' &&
        typeof google === 'object' && typeof google.maps === 'object') {
        initMaps();
    } else {
        setTimeout(checkReady, 200);
    }
}
checkReady();
</script>
</body>
</html>
